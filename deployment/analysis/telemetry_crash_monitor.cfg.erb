-- -*- lua -*-
filename = 'moz_telemetry_doctype_monitor.lua'
docType = "crash"
message_matcher = 'Fields[docType] == "'.. docType .. '" && (Type == "telemetry" || Type == "telemetry.error" || Type == "telemetry.duplicate")'
ticker_interval = 60
preserve_data = true

alert = {
  disabled = false,
  prefix = true,
  throttle = 1440,
  modules = {
    email = {recipients = {"trink@mozilla.com", "mreid@mozilla.com", "whd@mozilla.com"}},
  },

  thresholds = {
    release = {
      volume = {
        inactivity_timeout = 5,
        percent_delta = 30,
      },
      size = {
        average = 58148,
        percent_delta = 20,
      },
      ingestion_error = {
        percent = 1,
      },
      duplicate = {
        percent = 1,
      },
      latency = {
        hours = 24,
        percent = 15,
      },
      shape = {
        mindist = 4,
      },
    }
  }
}
